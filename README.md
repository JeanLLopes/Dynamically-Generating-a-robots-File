<div class="post-content"><h2 class="post-title entry-title"><a href="http://rehansaeed.com/dynamically-generating-robots-txt-using-asp-net-mvc/" title="Dynamically Generating Robots.txt Using ASP.NET MVC">Dynamically Generating Robots.txt Using ASP.NET MVC</a></h2><p class="post-meta entry-meta"> <span class="post-category"><a href="http://rehansaeed.com/category/all/" rel="tag">All</a>, <a href="http://rehansaeed.com/category/net/asp-net-mvc/" rel="tag">ASP.NET MVC</a></span> <span class="separator">/</span> <span class="post-comment"><a href="http://rehansaeed.com/dynamically-generating-robots-txt-using-asp-net-mvc/#comments">10 comments</a></span></p> <time datetime="2015-07-31" class="post-date entry-date updated">31st July 2015</time><div class="entry-content"><ul><li><a href="http://rehansaeed.com/asp-net-mvc-boilerplate/">ASP.NET MVC Boilerplate</a></li><li>Security<ul><li><a href="http://rehansaeed.com/securing-the-aspnet-mvc-web-config/">Securing the ASP.NET MVC Web.config (Updated)</a></li><li><a href="http://rehansaeed.com/nwebsec-asp-net-mvc-security-through-http-headers/">NWebSec ASP.NET MVC Security Through HTTP Headers</a></li><li><a href="http://rehansaeed.com/content-security-policy-for-asp-net-mvc/">Content Security Policy (CSP) for ASP.NET MVC</a></li></ul></li><li>Search Engine Optimization (SEO)<ul><li><a href="http://rehansaeed.com/canonical-urls-for-asp-net-mvc/">Canonical URL’s for ASP.NET MVC</a></li><li><a href="http://rehansaeed.com/dynamically-generating-robots-txt-using-asp-net-mvc">Dynamically Generating Robots.txt Using ASP.NET MVC</a></li></ul></li><li><a href="http://rehansaeed.com/internet-favicon-madness/">Internet Favicon Madness (Updated)</a></li><li><a href="http://rehansaeed.com/building-rssatom-feeds-for-asp-net-mvc/">Building RSS/Atom Feeds for ASP.NET MVC</a></li></ul><p>A robots.txt file is a simple text file you can place at the root of your site at http://example.com/robots.txt to tell search engine robots (also known as web crawlers) how to index your site. The robots know to look for this file at the root of every site before they start indexing the site. If you do not have this file in your site, you will be getting a lot of 404 Not Found errors in your logs.</p><p>The robots.txt uses the <a href="http://en.wikipedia.org/wiki/Robots_exclusion_standard">Robots Exclusion Standard</a> which is a very simple format that can give robots instructions on what to index and what to skip. A very basic robots.txt file looks like this:</p><div id="crayon-585a5bc6c6cd2342156267" class="crayon-syntax crayon-theme-vs2012-black crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 16px !important; height: auto;"><div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title">Example Robots.txt File</span><div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div><div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div><div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;"># Allow all robots to index this site.
user-agent: *
# Tell all robots not to index any of the pages under the /error path.
disallow: /error/
# Tell all robots to index the under the error/foo path.
allow: /error/foo/
# Add a link to the site-map. Unfortunately this must be an absolute URL.
sitemap: http://example.com/sitemap.xml</textarea></div><div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content" style="font-size: 13px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-585a5bc6c6cd2342156267-1">1</div><div class="crayon-num" data-line="crayon-585a5bc6c6cd2342156267-2">2</div><div class="crayon-num" data-line="crayon-585a5bc6c6cd2342156267-3">3</div><div class="crayon-num" data-line="crayon-585a5bc6c6cd2342156267-4">4</div><div class="crayon-num" data-line="crayon-585a5bc6c6cd2342156267-5">5</div><div class="crayon-num" data-line="crayon-585a5bc6c6cd2342156267-6">6</div><div class="crayon-num" data-line="crayon-585a5bc6c6cd2342156267-7">7</div><div class="crayon-num" data-line="crayon-585a5bc6c6cd2342156267-8">8</div><div class="crayon-num" data-line="crayon-585a5bc6c6cd2342156267-9">9</div><div class="crayon-num" data-line="crayon-585a5bc6c6cd2342156267-10">10</div><div class="crayon-num" data-line="crayon-585a5bc6c6cd2342156267-11">11</div></div></td><td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-585a5bc6c6cd2342156267-1"># Allow all robots to index this site.</div><div class="crayon-line" id="crayon-585a5bc6c6cd2342156267-2">user-agent: *</div><div class="crayon-line" id="crayon-585a5bc6c6cd2342156267-3">&nbsp;</div><div class="crayon-line" id="crayon-585a5bc6c6cd2342156267-4"># Tell all robots not to index any of the pages under the /error path.</div><div class="crayon-line" id="crayon-585a5bc6c6cd2342156267-5">disallow: /error/</div><div class="crayon-line" id="crayon-585a5bc6c6cd2342156267-6">&nbsp;</div><div class="crayon-line" id="crayon-585a5bc6c6cd2342156267-7"># Tell all robots to index the under the error/foo path.</div><div class="crayon-line" id="crayon-585a5bc6c6cd2342156267-8">allow: /error/foo/</div><div class="crayon-line" id="crayon-585a5bc6c6cd2342156267-9">&nbsp;</div><div class="crayon-line" id="crayon-585a5bc6c6cd2342156267-10"># Add a link to the site-map. Unfortunately this must be an absolute URL.</div><div class="crayon-line" id="crayon-585a5bc6c6cd2342156267-11">sitemap: http://example.com/sitemap.xml</div></div></td></tr></tbody></table></div></div><p>In the above code, all comments start with the hash character. It tells all robots that they can index everything on the site except pages under the /error path because we don’t want our error pages showing up in peoples search results. The only exception to that rule is to allow the resources under the /error/foo path to be indexed.</p><p>The last line is interesting and tells robots where to find an XML file called a site-map. A site-map contains a list of URL’s to all the pages in the site and is used to give search engines a list of URL’s they can go through to index the entire site. It’s a great SEO (Search Engine Optimization) technique to give your site a boost in it’s search rankings.</p><p>I will discuss creating a dynamic sitemap.xml file for ASP.NET MVC in a future post. For now, all you need to know is that the site-map URL has to be an absolute URL according to the specification. This is a pretty terrible decision by whoever created the robots exclusion standard. It’s really annoying that when you’re creating a site, you have to remember to manually update this URL. If the URL was relative we would not have this problem.</p><h1>Dynamically Generating a robots.txt File</h1><p>Fortunately, it’s really easy to dynamically create a robots.txt file, which auto-generates the site-map URL using the MVC UrlHelper. Take a look at the code below:</p><div id="crayon-585a5bc6c6cf7403663034" class="crayon-syntax crayon-theme-vs2012-black crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 16px !important; height: auto;"><div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title">Dynamically Generated robots.txt using ASP.NET MVC</span><div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button crayon-pressed" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">C#</span></div></div><div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important; margin-top: -19px; display: none;"></div><div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 16px !important; z-index: 1; opacity: 1; overflow: hidden; height: 352px;">public class HomeController : Controller
{
    [Route("robots.txt", Name = "GetRobotsText"), OutputCache(Duration = 86400)]
    public ContentResult RobotsText()
    {
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.AppendLine("user-agent: *");
        stringBuilder.AppendLine("disallow: /error/");
        stringBuilder.AppendLine("allow: /error/foo");
        stringBuilder.Append("sitemap: ");
        stringBuilder.AppendLine(this.Url.RouteUrl("GetSitemapXml", null, this.Request.Url.Scheme).TrimEnd('/'));
        return this.Content(stringBuilder.ToString(), "text/plain", Encoding.UTF8);
    }
    [Route("sitemap.xml", Name = "GetSitemapXml"), OutputCache(Duration = 86400)]
    public ContentResult SitemapXml()
    {
        // I'll talk about this in a later blog post.
    }
}</textarea></div><div class="crayon-main" style="position: relative; z-index: 0; overflow: hidden; opacity: 0;"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content" style="font-size: 13px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-585a5bc6c6cf7403663034-1">1</div><div class="crayon-num" data-line="crayon-585a5bc6c6cf7403663034-2">2</div><div class="crayon-num" data-line="crayon-585a5bc6c6cf7403663034-3">3</div><div class="crayon-num" data-line="crayon-585a5bc6c6cf7403663034-4">4</div><div class="crayon-num" data-line="crayon-585a5bc6c6cf7403663034-5">5</div><div class="crayon-num" data-line="crayon-585a5bc6c6cf7403663034-6">6</div><div class="crayon-num" data-line="crayon-585a5bc6c6cf7403663034-7">7</div><div class="crayon-num" data-line="crayon-585a5bc6c6cf7403663034-8">8</div><div class="crayon-num" data-line="crayon-585a5bc6c6cf7403663034-9">9</div><div class="crayon-num" data-line="crayon-585a5bc6c6cf7403663034-10">10</div><div class="crayon-num" data-line="crayon-585a5bc6c6cf7403663034-11">11</div><div class="crayon-num" data-line="crayon-585a5bc6c6cf7403663034-12">12</div><div class="crayon-num" data-line="crayon-585a5bc6c6cf7403663034-13">13</div><div class="crayon-num" data-line="crayon-585a5bc6c6cf7403663034-14">14</div><div class="crayon-num" data-line="crayon-585a5bc6c6cf7403663034-15">15</div><div class="crayon-num" data-line="crayon-585a5bc6c6cf7403663034-16">16</div><div class="crayon-num" data-line="crayon-585a5bc6c6cf7403663034-17">17</div><div class="crayon-num" data-line="crayon-585a5bc6c6cf7403663034-18">18</div><div class="crayon-num" data-line="crayon-585a5bc6c6cf7403663034-19">19</div><div class="crayon-num" data-line="crayon-585a5bc6c6cf7403663034-20">20</div><div class="crayon-num" data-line="crayon-585a5bc6c6cf7403663034-21">21</div><div class="crayon-num" data-line="crayon-585a5bc6c6cf7403663034-22">22</div></div></td><td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-585a5bc6c6cf7403663034-1"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">HomeController</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">Controller</span></div><div class="crayon-line" id="crayon-585a5bc6c6cf7403663034-2"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-585a5bc6c6cf7403663034-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-e">Route</span><span class="crayon-sy">(</span><span class="crayon-s">"robots.txt"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Name</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"GetRobotsText"</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">OutputCache</span><span class="crayon-sy">(</span><span class="crayon-v">Duration</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">86400</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-585a5bc6c6cf7403663034-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-e">ContentResult </span><span class="crayon-e">RobotsText</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-585a5bc6c6cf7403663034-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-585a5bc6c6cf7403663034-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">StringBuilder </span><span class="crayon-v">stringBuilder</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">StringBuilder</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-585a5bc6c6cf7403663034-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-585a5bc6c6cf7403663034-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">stringBuilder</span><span class="crayon-sy">.</span><span class="crayon-e">AppendLine</span><span class="crayon-sy">(</span><span class="crayon-s">"user-agent: *"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-585a5bc6c6cf7403663034-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">stringBuilder</span><span class="crayon-sy">.</span><span class="crayon-e">AppendLine</span><span class="crayon-sy">(</span><span class="crayon-s">"disallow: /error/"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-585a5bc6c6cf7403663034-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">stringBuilder</span><span class="crayon-sy">.</span><span class="crayon-e">AppendLine</span><span class="crayon-sy">(</span><span class="crayon-s">"allow: /error/foo"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-585a5bc6c6cf7403663034-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">stringBuilder</span><span class="crayon-sy">.</span><span class="crayon-e">Append</span><span class="crayon-sy">(</span><span class="crayon-s">"sitemap: "</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-585a5bc6c6cf7403663034-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">stringBuilder</span><span class="crayon-sy">.</span><span class="crayon-e">AppendLine</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">Url</span><span class="crayon-sy">.</span><span class="crayon-e">RouteUrl</span><span class="crayon-sy">(</span><span class="crayon-s">"GetSitemapXml"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">Request</span><span class="crayon-sy">.</span><span class="crayon-v">Url</span><span class="crayon-sy">.</span><span class="crayon-v">Scheme</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">TrimEnd</span><span class="crayon-sy">(</span><span class="crayon-s">'/'</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-585a5bc6c6cf7403663034-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-585a5bc6c6cf7403663034-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-e">Content</span><span class="crayon-sy">(</span><span class="crayon-v">stringBuilder</span><span class="crayon-sy">.</span><span class="crayon-e">ToString</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"text/plain"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Encoding</span><span class="crayon-sy">.</span><span class="crayon-v">UTF8</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-585a5bc6c6cf7403663034-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-585a5bc6c6cf7403663034-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-585a5bc6c6cf7403663034-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-e">Route</span><span class="crayon-sy">(</span><span class="crayon-s">"sitemap.xml"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Name</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"GetSitemapXml"</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">OutputCache</span><span class="crayon-sy">(</span><span class="crayon-v">Duration</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">86400</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-585a5bc6c6cf7403663034-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-e">ContentResult </span><span class="crayon-e">SitemapXml</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-585a5bc6c6cf7403663034-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-585a5bc6c6cf7403663034-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// I'll talk about this in a later blog post.</span></div><div class="crayon-line" id="crayon-585a5bc6c6cf7403663034-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-585a5bc6c6cf7403663034-22"><span class="crayon-sy">}</span></div></div></td></tr></tbody></table></div></div><p>I set up a route to the robots.txt path at the root of the site in my main HomeController and cached the response for a day for better performance (You can and should probably specify a much longer period of time if you know yours won’t change).</p><p>I then go on to append my commands to the StringBuilder. The great thing is that I can easily use the UrlHelper to generate a complete absolute URL to the sitemap.xml path which is also dynamically generated in much the same way. Finally, I just return the string as plain text using the UTF-8 encoding.</p><p>Creating a route ending with a file extension is not allowed by default in ASP.NET MVC. To get around this security restriction, you need to add the following to the Web.config file:</p><div id="crayon-585a5bc6c6d0d227446276" class="crayon-syntax crayon-theme-vs2012-black crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 16px !important; height: auto;"><div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title">Web.config Handler to Allow Robots.txt</span><div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-mixed-highlight" title="Contains Mixed Languages"></span><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">XHTML</span></div></div><div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div><div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;configuration&gt;
  &lt;!-- ...Omitted --&gt;
  &lt;system.webServer&gt;
    &lt;!-- ...Omitted --&gt;
    &lt;handlers&gt;
      &lt;!-- ...Omitted --&gt;
      &lt;add name="RobotsText"
           path="robots.txt"
           verb="GET"
           type="System.Web.Handlers.TransferRequestHandler"
           preCondition="integratedMode,runtimeVersionv4.0" /&gt;
    &lt;/handlers&gt;
  &lt;/system.webServer&gt;
&lt;/configuration&gt;</textarea></div><div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content" style="font-size: 13px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-585a5bc6c6d0d227446276-1">1</div><div class="crayon-num" data-line="crayon-585a5bc6c6d0d227446276-2">2</div><div class="crayon-num" data-line="crayon-585a5bc6c6d0d227446276-3">3</div><div class="crayon-num" data-line="crayon-585a5bc6c6d0d227446276-4">4</div><div class="crayon-num" data-line="crayon-585a5bc6c6d0d227446276-5">5</div><div class="crayon-num" data-line="crayon-585a5bc6c6d0d227446276-6">6</div><div class="crayon-num" data-line="crayon-585a5bc6c6d0d227446276-7">7</div><div class="crayon-num" data-line="crayon-585a5bc6c6d0d227446276-8">8</div><div class="crayon-num" data-line="crayon-585a5bc6c6d0d227446276-9">9</div><div class="crayon-num" data-line="crayon-585a5bc6c6d0d227446276-10">10</div><div class="crayon-num" data-line="crayon-585a5bc6c6d0d227446276-11">11</div><div class="crayon-num" data-line="crayon-585a5bc6c6d0d227446276-12">12</div><div class="crayon-num" data-line="crayon-585a5bc6c6d0d227446276-13">13</div><div class="crayon-num" data-line="crayon-585a5bc6c6d0d227446276-14">14</div><div class="crayon-num" data-line="crayon-585a5bc6c6d0d227446276-15">15</div></div></td><td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-585a5bc6c6d0d227446276-1"><span class="crayon-ta">&lt;?</span><span class="crayon-e">xml </span><span class="crayon-i">version</span><span class="crayon-o">=</span><span class="crayon-s">"1.0"</span><span class="crayon-h"> </span><span class="crayon-i">encoding</span><span class="crayon-o">=</span><span class="crayon-s">"utf-8"</span><span class="crayon-ta">?&gt;</span></div><div class="crayon-line" id="crayon-585a5bc6c6d0d227446276-2"><span class="crayon-r ">&lt;configuration&gt;</span></div><div class="crayon-line" id="crayon-585a5bc6c6d0d227446276-3"><span class="crayon-i ">&nbsp;&nbsp;</span><span class="crayon-c">&lt;!-- ...Omitted --&gt;</span></div><div class="crayon-line" id="crayon-585a5bc6c6d0d227446276-4"><span class="crayon-i ">&nbsp;&nbsp;</span><span class="crayon-r ">&lt;system.webServer&gt;</span></div><div class="crayon-line" id="crayon-585a5bc6c6d0d227446276-5"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">&lt;!-- ...Omitted --&gt;</span></div><div class="crayon-line" id="crayon-585a5bc6c6d0d227446276-6"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r ">&lt;handlers&gt;</span></div><div class="crayon-line" id="crayon-585a5bc6c6d0d227446276-7"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">&lt;!-- ...Omitted --&gt;</span></div><div class="crayon-line" id="crayon-585a5bc6c6d0d227446276-8"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r ">&lt;add </span><span class="crayon-e ">name</span><span class="crayon-o">=</span><span class="crayon-s ">"RobotsText"</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-585a5bc6c6d0d227446276-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e ">path</span><span class="crayon-o">=</span><span class="crayon-s ">"robots.txt"</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-585a5bc6c6d0d227446276-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e ">verb</span><span class="crayon-o">=</span><span class="crayon-s ">"GET"</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-585a5bc6c6d0d227446276-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e ">type</span><span class="crayon-o">=</span><span class="crayon-s ">"System.Web.Handlers.TransferRequestHandler"</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-585a5bc6c6d0d227446276-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e ">preCondition</span><span class="crayon-o">=</span><span class="crayon-s ">"integratedMode,runtimeVersionv4.0"</span><span class="crayon-r "> /&gt;</span></div><div class="crayon-line" id="crayon-585a5bc6c6d0d227446276-13"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r ">&lt;/handlers&gt;</span></div><div class="crayon-line" id="crayon-585a5bc6c6d0d227446276-14"><span class="crayon-i ">&nbsp;&nbsp;</span><span class="crayon-r ">&lt;/system.webServer&gt;</span></div><div class="crayon-line" id="crayon-585a5bc6c6d0d227446276-15"><span class="crayon-r ">&lt;/configuration&gt;</span></div></div></td></tr></tbody></table></div></div><p></p><h1>Conclusion</h1><p>Dynamically generating your robots.txt file is pretty easy and only takes as many lines of code as you need to write your robots.txt file anyway. It also means that you don’t need to pollute your project structure with yet another file at the root of it (This problem is fixed in MVC 6, where all static files must be added to the wwwroot folder). You can also dynamically generate your site-map URL so you don’t need to remember to update it every time you change the domain.</p><p>You could argue that performance is an issue when compared to a static robots.txt text file but its a matter of a few bytes and if you cache the response with a sufficient time limit then I think that even that problem goes away.</p><p>Once again, you can find a working example of this and much more using the <a href="https://visualstudiogallery.msdn.microsoft.com/6cf50a48-fc1e-4eaf-9e82-0b2a6705ca7d">ASP.NET MVC Boilerplate</a> project template or view the source code directly on <a href="https://github.com/RehanSaeed/ASP.NET-MVC-Boilerplate">GitHub</a>.</p><div id="themify_builder_content-5932" data-postid="5932" class="themify_builder_content themify_builder_content-5932 themify_builder themify_builder_front"></div><div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon sd-sharing"><h3 class="sd-title">Share this:</h3><div class="sd-content"><ul><li class="share-facebook"><a rel="nofollow" data-shared="sharing-facebook-5932" class="share-facebook sd-button share-icon no-text" href="http://rehansaeed.com/dynamically-generating-robots-txt-using-asp-net-mvc/?share=facebook&amp;nb=1" target="_blank" title="Click to share on Facebook"><span><span class="share-count">65</span></span><span class="sharing-screen-reader-text">Click to share on Facebook (Opens in new window)<span class="share-count">65</span></span></a></li><li class="share-twitter"><a rel="nofollow" data-shared="sharing-twitter-5932" class="share-twitter sd-button share-icon no-text" href="http://rehansaeed.com/dynamically-generating-robots-txt-using-asp-net-mvc/?share=twitter&amp;nb=1" target="_blank" title="Click to share on Twitter"><span></span><span class="sharing-screen-reader-text">Click to share on Twitter (Opens in new window)</span></a></li><li class="share-google-plus-1"><a rel="nofollow" data-shared="sharing-google-5932" class="share-google-plus-1 sd-button share-icon no-text" href="http://rehansaeed.com/dynamically-generating-robots-txt-using-asp-net-mvc/?share=google-plus-1&amp;nb=1" target="_blank" title="Click to share on Google+"><span></span><span class="sharing-screen-reader-text">Click to share on Google+ (Opens in new window)</span></a></li><li class="share-pinterest"><a rel="nofollow" data-shared="sharing-pinterest-5932" class="share-pinterest sd-button share-icon no-text" href="http://rehansaeed.com/dynamically-generating-robots-txt-using-asp-net-mvc/?share=pinterest&amp;nb=1" target="_blank" title="Click to share on Pinterest"><span><span class="share-count">2</span></span><span class="sharing-screen-reader-text">Click to share on Pinterest (Opens in new window)<span class="share-count">2</span></span></a></li><li class="share-pocket"><a rel="nofollow" data-shared="" class="share-pocket sd-button share-icon no-text" href="http://rehansaeed.com/dynamically-generating-robots-txt-using-asp-net-mvc/?share=pocket&amp;nb=1" target="_blank" title="Click to share on Pocket"><span></span><span class="sharing-screen-reader-text">Click to share on Pocket (Opens in new window)</span></a></li><li class="share-linkedin"><a rel="nofollow" data-shared="sharing-linkedin-5932" class="share-linkedin sd-button share-icon no-text" href="http://rehansaeed.com/dynamically-generating-robots-txt-using-asp-net-mvc/?share=linkedin&amp;nb=1" target="_blank" title="Click to share on LinkedIn"><span><span class="share-count">8</span></span><span class="sharing-screen-reader-text">Click to share on LinkedIn (Opens in new window)<span class="share-count">8</span></span></a></li><li class="share-reddit"><a rel="nofollow" data-shared="" class="share-reddit sd-button share-icon no-text" href="http://rehansaeed.com/dynamically-generating-robots-txt-using-asp-net-mvc/?share=reddit&amp;nb=1" target="_blank" title="Click to share on Reddit"><span></span><span class="sharing-screen-reader-text">Click to share on Reddit (Opens in new window)</span></a></li><li class="share-tumblr"><a rel="nofollow" data-shared="" class="share-tumblr sd-button share-icon no-text" href="http://rehansaeed.com/dynamically-generating-robots-txt-using-asp-net-mvc/?share=tumblr&amp;nb=1" target="_blank" title="Click to share on Tumblr"><span></span><span class="sharing-screen-reader-text">Click to share on Tumblr (Opens in new window)</span></a></li><li class="share-email share-service-visible"><a rel="nofollow" data-shared="" class="share-email sd-button share-icon no-text" href="http://rehansaeed.com/dynamically-generating-robots-txt-using-asp-net-mvc/?share=email&amp;nb=1" target="_blank" title="Click to email this to a friend"><span></span><span class="sharing-screen-reader-text">Click to email this to a friend (Opens in new window)</span></a></li><li class="share-print"><a rel="nofollow" data-shared="" class="share-print sd-button share-icon no-text" href="http://rehansaeed.com/dynamically-generating-robots-txt-using-asp-net-mvc/#print" target="_blank" title="Click to print"><span></span><span class="sharing-screen-reader-text">Click to print (Opens in new window)</span></a></li><li class="share-end"></li></ul></div></div></div><div id="jp-relatedposts" class="jp-relatedposts" style="display: block;"><h3 class="jp-relatedposts-headline"><em>Related</em></h3><div class="jp-relatedposts-items jp-relatedposts-items-visual"><div class="jp-relatedposts-post jp-relatedposts-post0 jp-relatedposts-post-thumbs" data-post-id="3039" data-post-format="false"><a class="jp-relatedposts-post-a" href="http://rehansaeed.com/asp-net-mvc-boilerplate/" title="ASP.NET MVC Boilerplate
